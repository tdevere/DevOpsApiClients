# AUTO-GENERATED by spec_to_yaml.py â€” review recommended
domain: DistributedTask
resource: Agents
operation: create_agents
ps_verb: Add
ps_noun: Agent
http_method: POST
url_path: _apis/distributedtask/pools/{pool_id}/agents
api_version: '7.2'
docs_url: https://learn.microsoft.com/en-us/rest/api/azure/devops/distributed-task/agents/add?view=azure-devops-rest-7.2
synopsis: Adds an agent to a pool.
project_scoped: false
params:
- name: pool_id
  env_var: POOL_ID
  description: The agent pool in which to add the agent
  required: true
- name: assigned_agent_cloud_request
  env_var: ASSIGNED_AGENT_CLOUD_REQUEST
  description: The agent cloud request that's currently associated with this agent.
  required: false
  cli_flag: --assigned-agent-cloud-request
- name: assigned_request
  env_var: ASSIGNED_REQUEST
  description: The request which is currently assigned to this agent.
  required: false
  cli_flag: --assigned-request
- name: authorization
  env_var: AUTHORIZATION
  description: Authorization information for this agent.
  required: false
  cli_flag: --authorization
- name: created_on
  env_var: CREATED_ON
  description: Date on which this agent was created.
  required: false
  cli_flag: --created-on
- name: last_completed_request
  env_var: LAST_COMPLETED_REQUEST
  description: The last request which was completed by this agent.
  required: false
  cli_flag: --last-completed-request
- name: max_parallelism
  env_var: MAX_PARALLELISM
  description: Maximum job parallelism allowed for this agent.
  required: false
  cli_flag: --max-parallelism
body_fields:
- json_path: assignedAgentCloudRequest
  source: param:assigned_agent_cloud_request
  description: The agent cloud request that's currently associated with this agent.
- json_path: assignedRequest
  source: param:assigned_request
  description: The request which is currently assigned to this agent.
- json_path: authorization
  source: param:authorization
  description: Authorization information for this agent.
- json_path: createdOn
  source: param:created_on
  description: Date on which this agent was created.
- json_path: lastCompletedRequest
  source: param:last_completed_request
  description: The last request which was completed by this agent.
- json_path: maxParallelism
  source: param:max_parallelism
  description: Maximum job parallelism allowed for this agent.
version_guard_keys:
- assignedAgentCloudRequest
- assignedRequest
output_mode: message
fixture_success:
  assignedAgentCloudRequest:
    agent:
      accessPoint: sample-string
      enabled: true
      id: 1
      name: sample-string
      osDescription: sample-string
      provisioningState: sample-string
      status: {}
    agentCloudId: 1
    agentConnectedTime: '2026-01-15T10:30:00Z'
    agentData:
      item:
        first: {}
        hasValues: {}
        item: {}
        last: {}
        next: {}
        parent: {}
        path: {}
        previous: {}
      type: sample-string
    agentSpecification:
      item:
        first: {}
        hasValues: {}
        item: {}
        last: {}
        next: {}
        parent: {}
        path: {}
        previous: {}
      type: sample-string
    pool:
      id: 1
      isHosted: true
      isLegacy: true
      name: sample-string
      options: {}
      poolType: {}
      scope: a1b2c3d4-e5f6-7890-abcd-ef1234567890
      size: 1
    poolProvidersTags: {}
    provisionedTime: '2026-01-15T10:30:00Z'
  assignedRequest:
    agentSpecification:
      item:
        first: {}
        hasValues: {}
        item: {}
        last: {}
        next: {}
        parent: {}
        path: {}
        previous: {}
      type: sample-string
    data: {}
    definition:
      id: 1
      name: sample-string
    demands:
    - name: {}
      value: {}
    hostId: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    jobId: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    jobName: sample-string
    lockedUntil: '2026-01-15T10:30:00Z'
  authorization:
    authorizationUrl: sample-string
    clientId: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    publicKey:
      exponent:
      - {}
      modulus:
      - {}
  createdOn: '2026-01-15T10:30:00Z'
  lastCompletedRequest:
    agentSpecification:
      item:
        first: {}
        hasValues: {}
        item: {}
        last: {}
        next: {}
        parent: {}
        path: {}
        previous: {}
      type: sample-string
    data: {}
    definition:
      id: 1
      name: sample-string
    demands:
    - name: {}
      value: {}
    hostId: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    jobId: a1b2c3d4-e5f6-7890-abcd-ef1234567890
    jobName: sample-string
    lockedUntil: '2026-01-15T10:30:00Z'
  maxParallelism: 1
  pendingUpdate:
    currentState: sample-string
    reason:
      code: {}
    requestedBy:
      directoryAlias: sample-string
      id: sample-string
      imageUrl: sample-string
      inactive: true
      isAadIdentity: true
      isContainer: true
      isDeletedInOrigin: true
      profileUrl: sample-string
    requestTime: '2026-01-15T10:30:00Z'
    sourceVersion:
      major: 1
      minor: 1
      patch: 1
    targetVersion:
      major: 1
      minor: 1
      patch: 1
  properties:
    count: 1
    item: {}
    keys:
    - sample-string
    values:
    - sample-string
fixture_error_404:
  message: Agents not found
  typeKey: AgentsNotFoundException
  errorCode: 0

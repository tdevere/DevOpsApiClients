# Operation Definition: Git / PullRequests / List Pull Requests
# Single source of truth â€” generates Python, PowerShell, Bash + tests + fixtures.

domain: Git
resource: PullRequests
operation: list_pull_requests
ps_verb: List
ps_noun: PullRequests

http_method: GET
url_path: "_apis/git/repositories/{repository_id}/pullrequests"
api_version: "7.2"
docs_url: "https://learn.microsoft.com/en-us/rest/api/azure/devops/git/pull-requests/get-pull-requests?view=azure-devops-rest-7.2"

synopsis: "List pull requests in an Azure DevOps Git repository."
description: "Returns all pull requests for the specified repository."

project_scoped: true

params:
  - name: repository_id
    env_var: REPO_ID
    description: "Repository name or GUID"
    required: true

version_guard_keys:
  - count
  - value

success_status: 200
output_mode: table
table_columns:
  - pullRequestId
  - title
  - status
  - createdBy

fixture_success:
  count: 2
  value:
    - pullRequestId: 101
      title: "Add new feature"
      description: "Implements the new feature"
      status: "active"
      createdBy:
        displayName: "Alice Developer"
        uniqueName: "alice@example.com"
      sourceRefName: "refs/heads/feature/new-feature"
      targetRefName: "refs/heads/main"
      repository:
        id: "r1a2b3c4-d5e6-7890-abcd-ef1234567890"
        name: "MyRepo"
      creationDate: "2026-01-15T10:30:00Z"
    - pullRequestId: 102
      title: "Fix bug in parser"
      description: "Fixes the parsing issue"
      status: "completed"
      createdBy:
        displayName: "Bob Engineer"
        uniqueName: "bob@example.com"
      sourceRefName: "refs/heads/bugfix/parser"
      targetRefName: "refs/heads/main"
      repository:
        id: "r1a2b3c4-d5e6-7890-abcd-ef1234567890"
        name: "MyRepo"
      creationDate: "2026-01-10T14:00:00Z"

fixture_error_404:
  message: "Repository not found"
  typeKey: "GitRepositoryNotFoundException"
  errorCode: 0
